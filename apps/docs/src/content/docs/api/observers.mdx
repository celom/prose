---
title: Observers
description: API reference for FlowObserver interface and built-in observer implementations.
sidebar:
  order: 5
---

## `FlowObserver` interface

All hooks are optional. Implement only the ones you need.

```typescript
interface FlowObserver {
  onFlowStart?(flowName: string, input: unknown): void;
  onFlowComplete?(flowName: string, output: unknown, duration: number): void;
  onFlowError?(flowName: string, error: Error, duration: number): void;
  onFlowBreak?(flowName: string, breakStepName: string, returnValue: unknown, duration: number): void;
  onStepStart?(stepName: string, context: FlowContext): void;
  onStepComplete?(stepName: string, result: unknown, duration: number, context: FlowContext): void;
  onStepError?(stepName: string, error: Error, duration: number, context: FlowContext): void;
  onStepRetry?(stepName: string, attempt: number, maxAttempts: number, error: Error): void;
  onStepSkipped?(stepName: string, context: FlowContext): void;
}
```

## `DefaultObserver`

Console-based logging. Accepts an optional logger interface.

```typescript
import { DefaultObserver } from '@celom/flume';

// Uses console by default
const observer = new DefaultObserver();

// Custom logger
const observer = new DefaultObserver({
  info: (msg) => myLogger.info(msg),
  error: (msg) => myLogger.error(msg),
  warn: (msg) => myLogger.warn(msg),
});
```

## `NoOpObserver`

Silent observer — all hooks are no-ops. Useful as a default value to avoid null checks.

```typescript
import { NoOpObserver } from '@celom/flume';

const observer = new NoOpObserver();
```

## `PinoFlowObserver`

Structured JSON logging with any Pino-compatible logger.

```typescript
import { PinoFlowObserver } from '@celom/flume';
import pino from 'pino';

const observer = new PinoFlowObserver(pino());
```

Works with Fastify's built-in logger:

```typescript
fastify.post('/orders', async (request) => {
  const observer = new PinoFlowObserver(request.log);
  await flow.execute(input, deps, { observer });
});
```

Each hook produces a structured log entry with flow name, step name, duration, and contextual data — ready for log aggregation and analysis.
